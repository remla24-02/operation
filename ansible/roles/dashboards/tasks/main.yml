- name: Check for Prometheus dashboard
  command: kubectl get svc prometheus-dashboard
  register: prometheus_dashboard_check
  ignore_errors: yes

- name: Expose Prometheus dashboard
  shell: kubectl expose svc prometheus-server --type=NodePort --target-port=9090 --name=prometheus-dashboard
  when: prometheus_dashboard_check.failed

- name: Check for Grafana dashboard
  command: kubectl get svc grafana-dashboard
  register: grafana_dashboard_check
  ignore_errors: yes

- name: Expose Grafana dashboard
  shell: kubectl expose svc grafana --type=NodePort --target-port=3000 --name=grafana-dashboard
  when: grafana_dashboard_check.failed
